{% extends "base.html" %}

{% block title %}{{ participant_name }}'s Progress - corrode Course{% endblock %}

{% block content %}
<div class="container">
    <div class="nav">
        <a href="/" class="nav-brand">corrode Course</a>
        <div class="nav-links">
            <span class="nav-link">Welcome, {{ participant_name }}!</span>
        </div>
    </div>

    <div class="header">
        <h1>Your Progress</h1>
        <p>Track your journey through the Rust course exercises</p>
    </div>

    <div class="stats">
        <div class="stat-card">
            <span class="stat-number">{% set completed_count = 0 %}{% for ex in exercises %}{% if ex.completed %}{% set completed_count = completed_count + 1 %}{% endif %}{% endfor %}{{ completed_count }}</span>
            <span class="stat-label">Completed</span>
        </div>
        <div class="stat-card">
            <span class="stat-number">{% set perfected_count = 0 %}{% for ex in exercises %}{% if ex.perfected %}{% set perfected_count = perfected_count + 1 %}{% endif %}{% endfor %}{{ perfected_count }}</span>
            <span class="stat-label">‚≠ê Perfected</span>
        </div>
        <div class="stat-card">
            <span class="stat-number">{% set total_count = 0 %}{% for ex in exercises %}{% set total_count = total_count + 1 %}{% endfor %}{{ total_count }}</span>
            <span class="stat-label">Total Exercises</span>
        </div>
    </div>

    <div class="card">
        <h2 style="margin-bottom: 1.5rem;">Exercise Progress</h2>
        
        <div class="exercise-list">
            {% for exercise in exercises %}
            <div class="exercise-item">
                <span class="exercise-status">
                    {% if exercise.perfected %}
                        <span class="status-perfected">‚≠ê</span>
                    {% else %}
                        {% if exercise.completed %}
                            <span class="status-completed">‚úÖ</span>
                        {% else %}
                            <span class="status-pending">‚è≥</span>
                        {% endif %}
                    {% endif %}
                </span>
                <div>
                    <div class="exercise-name">{{ exercise.name }}</div>
                    {% if exercise.perfected %}
                        <div style="font-size: 0.875rem; color: var(--warning);">Perfected with pedantic checks</div>
                    {% else %}
                        {% if exercise.completed %}
                            <div style="font-size: 0.875rem; color: var(--success);">Tests passing</div>
                        {% else %}
                            <div style="font-size: 0.875rem; color: var(--text-muted);">Not attempted</div>
                        {% endif %}
                    {% endif %}
                </div>
            </div>
            {% endfor %}
        </div>
    </div>

    <div class="card">
        <h3 style="margin-bottom: 1rem;">CLI Commands</h3>
        <div class="code-block">
# Submit an exercise<br>
cargo course submit examples/{{ exercises[0].name }}.rs<br><br>

# Submit with pedantic checks to earn ‚≠ê<br>
cargo course submit examples/{{ exercises[0].name }}.rs --pedantic<br><br>

# Check your progress<br>
cargo course status
        </div>
    </div>

    <div style="text-align: center; margin-top: 3rem; color: var(--text-muted);">
        <p>Keep going! Every exercise brings you closer to Rust mastery ü¶Ä</p>
    </div>
</div>
{% endblock %}